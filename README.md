# thewall
The Wall of Messages - test job from Light IT

Александр Малыгин, электропочта avm68@ukr.net

Проект Стена сообщений (The Wall of Messages) разработан в порядке выполнения 
тестового задания на вакансию веб-разработчик в компании Light IT.

Использованные технологии; HTML,CSS,JavaScript,PHP,MySQL

Приложение испытывалось в следующих браузерах:
Internet Explorer 11
Яндекс.Браузер 17.7.1.804
Opera 47.0.2631.80

Серверная часть работала на машине разработчика под WampServer Version 3.1.0 64bit:
Apache 2.4.27 - PHP 5.6.31
MySQL 5.7.19
MariaDB 10.2.8
PHP 5.6.31 for CLI (Command-Line Interface)

Список файлов;
auth.php           - страница авторизации
fbauth.php         - класс авторизации на Фейсбук от стороннего разработчика
index.php          - главная страница (редирект на авторизацию)
show.php           - страница отображения и ввода сообщений
thewall-model.php  - ядро системы: функции работы с БД
thewall-full-struct.sql - скрипт для создания чистой БД с нуля в MySQL

Требования к установке:

Веб-приложение должно иметь домен thewall.avm
Это обусловлено привязкой к Facebook Application для авторизации, в настройке которого указан адрес сайта:
http://thewall.avm/

На хостинг приложение не выложено, разрабатывалось и испытывалось локально.


Стена сообщений реализована как статическое дерево. Вся структура читается из базы и выводится 
пользователю при помощи рекурсивных функций. В задании не было явного требования, чтобы дерево 
подгружалось частями. Для нескольких сотен сообщений (и для тествовго задания) считаю это 
приемлемым (в смысле нагрузки на сервер и клиента).

Известные недостатки, которые можно было бы исправить в следующих версиях (если бы это был 
коммерческий проект):

* UserID передаётся от страницы auth в show в явном виде через параметр. 
Для отладки это очень удобно, но для реального применения является уязвимостью.
Решение: передавать вошедшего пользователя через cookies.

* Статическое дерево не контролируется никак и может быть громоздким, как для юзабилити, 
так и для сервера и браузера. Варианты решения:
1) сделать пагинацию с ограничением количества первичных сообщений (что просто) или любых 
сообщений (немного сложнее), передаваемых на клиента.
2) сделать динамическую подгрузку ветвей, при этом вначале выводятся только первичные 
сообщения или с ограничением глубины ветвей. Требует использования технологии AJAX.
3) динамическая подгрузка по принципу "бесконечного скролла" также позволила бы решить 
проблему большого дерева.

* При попытке обновить страницу (F5) после отправки формы браузер пытается повторить отправку.
Такое поведение наблюдается на многих сайтах. Как с ним бороться, пока не знаю.
